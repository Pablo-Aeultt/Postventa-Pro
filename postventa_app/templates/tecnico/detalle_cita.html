{% extends 'base.html' %}
{% block title %}Detalle de Cita - Técnico{% endblock %}

{% block extra_css %}
<style>
:root { --color-primary:#1A4D4D; --color-secondary:#2A6D6D; }
.card-custom { background:#fff; border-radius:18px; box-shadow:0 4px 14px rgba(0,0,0,0.08); border-left:4px solid var(--color-primary); overflow:hidden; margin-bottom:20px; }
.card-header-custom { background:linear-gradient(135deg,var(--color-primary),var(--color-secondary)); color:#fff; padding:16px 24px; font-weight:600; display:flex; align-items:center; gap:10px; font-size:1.1rem; }
.badge-estado { padding:8px 16px; font-size:0.95rem; font-weight:600; border-radius:8px; }
.badge-estado-pendiente { background-color:#ffc107; color:#000; }
.badge-estado-confirmada { background-color:#0dcaf0; color:#000; }
.badge-estado-en_curso { background-color:#0d6efd; color:#fff; }
.badge-estado-completada { background-color:#198754; color:#fff; }
.badge-estado-cancelada { background-color:#dc3545; color:#fff; }
.detalle-cuadro { background:#f8f9fa; padding:16px; border-radius:10px; margin-bottom:16px; }
.detalle-fila { display:flex; padding:8px 0; border-bottom:1px solid #dee2e6; }
.detalle-fila:last-child { border-bottom:none; }
.detalle-label { font-weight:600; color:var(--color-primary); min-width:200px; }
.detalle-valor { color:#495057; }
.btn-outline-primary { border:2px solid var(--color-primary); color:var(--color-primary); font-weight:600; border-radius:10px; transition:all 0.3s ease; }
.btn-outline-primary:hover { background:var(--color-primary); color:#fff; transform:translateY(-2px); box-shadow:0 4px 12px rgba(26,77,77,0.2); }
</style>
{% endblock %}

{% block content %}
<div class="container py-4">
  <div class="d-flex align-items-center justify-content-between mb-3">
    <div>
      <h4 class="mb-0"><i class="bi bi-calendar-event"></i> Detalle de Cita</h4>
      <small class="text-muted">Reclamo: {{ cita.id_reclamo.numero_folio }}</small>
    </div>
    <div class="d-flex gap-2">
      <a href="{% url 'tecnico_historial_citas' %}" class="btn btn-outline-primary"><i class="bi bi-arrow-left"></i> Volver</a>
    </div>
  </div>

  <div class="card-custom">
    <div class="card-header-custom">
      <i class="bi bi-info-circle"></i>
      <span>Información de la Cita</span>
      <span class="ms-auto">
        <span class="badge badge-estado badge-estado-{{ cita.estado }}">
          {{ cita.get_estado_display }}
        </span>
      </span>
    </div>
    <div class="card-body">
      <div class="detalle-cuadro">
        <div class="detalle-fila">
          <div class="detalle-label"><i class="bi bi-calendar-check"></i> Fecha Programada</div>
          <div class="detalle-valor">{{ cita.fecha_programada|date:"d/m/Y H:i" }}</div>
        </div>
        <div class="detalle-fila">
          <div class="detalle-label"><i class="bi bi-tag"></i> Folio Reclamo</div>
          <div class="detalle-valor">
            <a href="{% url 'tecnico_detalle_reclamo' cita.id_reclamo.id_reclamo %}" class="text-primary">
              {{ cita.id_reclamo.numero_folio }}
            </a>
          </div>
        </div>
        <div class="detalle-fila">
          <div class="detalle-label"><i class="bi bi-person"></i> Propietario</div>
          <div class="detalle-valor">{{ cita.id_cliente.nombre }}</div>
        </div>
        <div class="detalle-fila">
          <div class="detalle-label"><i class="bi bi-building"></i> Proyecto</div>
          <div class="detalle-valor">{{ cita.id_reclamo.proyecto.nombre }}</div>
        </div>
        <div class="detalle-fila">
          <div class="detalle-label"><i class="bi bi-map"></i> Dirección</div>
          <div class="detalle-valor">{{ cita.id_reclamo.unidad.proyecto.direccion }}</div>
        </div>
        <div class="detalle-fila">
          <div class="detalle-label"><i class="bi bi-tools"></i> Especialidad</div>
          <div class="detalle-valor">
            {% if cita.id_reclamo.categoria %}
              {{ cita.id_reclamo.categoria }}
            {% else %}
              <span class="text-muted">No especificada</span>
            {% endif %}
          </div>
        </div>
      </div>

      {% if cita.id_reclamo.descripcion %}
      <div class="alert alert-info py-3 px-4" style="border-left:4px solid var(--color-primary);">
        <h6 class="mb-2"><i class="bi bi-card-text"></i> Descripción del Reclamo</h6>
        <p class="mb-0">{{ cita.id_reclamo.descripcion }}</p>
      </div>
      {% endif %}

      <div class="d-flex gap-2 mt-4">
        <a href="{% url 'tecnico_detalle_reclamo' cita.id_reclamo.id_reclamo %}" class="btn btn-primary">
          <i class="bi bi-file-earmark-text"></i> Ver Detalle del Reclamo
        </a>
      </div>
    </div>
  </div>
</div>
{% endblock %}
